import{j as e,r,W as q,a as B}from"./app-e513ce89.js";import{A as z,L as H}from"./AuthenticatedLayout-9f75699a.js";import{M as g}from"./Modal-dd8a7b02.js";import"./transition-57205aa3.js";function I({roles:o,setData:l,isCliente:i,data:d,submit:c,changeRol:m,hideModal:n}){return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"flex flex-col gap-4 text-textgray",children:[e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex flex-col w-3/5",children:[e.jsx("label",{htmlFor:"name",className:"text-xs",children:"Nombre Completo"}),e.jsx("input",{type:"text",name:"name",id:"name",className:"h-9 rounded-md w-full outline-none",value:d.name,onChange:t=>l("name",t.target.value)})]}),e.jsxs("div",{className:"flex flex-col w-2/5",children:[e.jsx("label",{htmlFor:"telefono",className:"text-xs",children:"Número contacto"}),e.jsx("input",{type:"tel",name:"telefono",id:"telefono",className:"h-9 rounded-md full outline-none px-2",value:d.telefono,onChange:t=>l("telefono",t.target.value)})]})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex flex-col w-3/5",children:[e.jsx("label",{htmlFor:"email",className:"text-xs",children:"Correo electrónico"}),e.jsx("input",{type:"text",name:"email",id:"email",className:"h-9 rounded-md w-full outline-none px-2",value:d.email,onChange:t=>l("email",t.target.value)})]}),e.jsxs("div",{className:"flex flex-col w-2/5",children:[e.jsx("label",{htmlFor:"email",className:"text-xs",children:"Asignar Rol"}),e.jsxs("select",{name:"rol_id",id:"rol_id",className:"w-full p-1 bg-white rounded-md outline-none",onChange:m,children:[e.jsx("option",{value:"",children:"Seleccione Rol"}),o.map(t=>e.jsx("option",{value:t.id,children:t.nombre},t.id))]})]})]}),i&&e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex flex-col w-2/4",children:[e.jsx("label",{htmlFor:"name",className:"text-xs",children:"Empresa"}),e.jsx("input",{type:"text",name:"name",id:"name",className:"h-9 rounded-md outline-none px-2"})]}),e.jsxs("div",{className:"flex flex-col w-2/4",children:[e.jsx("label",{htmlFor:"rnc",className:"text-xs",children:"RNC"}),e.jsx("input",{type:"text",name:"rnc",id:"rnc",className:"h-9 rounded-md outline-none px-2"})]})]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{className:"border py-1 w-36 rounded-xl bg-red-500 hover:bg-red-400 text-offwhite q mr-5 mt-5",onClick:n,children:"Cancelar"}),e.jsx("button",{onClick:c,className:"border py-1 w-36 rounded-xl bg-blue-500 hover:bg-blue-600 text-offwhite self-end justify-end mr-5 mt-5",children:"Registrar"})]})]})}function W({roles:o,changeRol:l,hideModal:i,update:d,selectedUser:c,setData:m}){return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"flex flex-col gap-4 text-textgray",children:[e.jsx("div",{className:"flex gap-8",children:e.jsx("h2",{children:"Nombre de Usuario"})}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex flex-col w-2/4",children:[e.jsx("label",{htmlFor:"rol_id",className:"text-xs",children:"Asignar Rol"}),e.jsxs("select",{name:"rol_id",id:"rol_id",className:"w-full p-1 bg-white rounded-md outline-none",defaultValue:c.rol_id,onChange:l,children:[e.jsx("option",{value:"",children:"Seleccione Rol"}),o.map(n=>e.jsx("option",{value:n.id,children:n.nombre},n.id))]})]}),e.jsxs("div",{className:"flex flex-col w-2/4",children:[e.jsx("label",{htmlFor:"status",className:"text-xs",children:"Seleccionar Status"}),e.jsxs("select",{name:"status",id:"status",className:"w-full p-1 bg-white rounded-md outline-none",defaultValue:c.status,onChange:n=>m("status",n.target.value),children:[e.jsx("option",{value:"",children:"Selecionar Estado"}),e.jsx("option",{value:1,children:"Activo"}),e.jsx("option",{value:0,children:"Inactivo"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{className:"border py-1 w-36 rounded-xl bg-red-500 hover:bg-red-400 text-offwhite q mr-5 mt-5",onClick:i,children:"Cancelar"}),e.jsx("button",{onClick:d,className:"border py-1 w-36 rounded-xl bg-blue-500 hover:bg-blue-600 text-offwhite self-end justify-end mr-5 mt-5",children:"Registrar"})]})]})}function G({hideModal:o,destroy:l,selectedUser:i}){return e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"w-full text-center text-xl mb-2",children:["¿Seguro que deseas eliminar el usuario",e.jsxs("strong",{className:"uppercase",children:[" ",i.name]}),"?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{className:"border py-1 w-36 rounded-xl bg-red-500 hover:bg-red-400 text-offwhite q mr-5 mt-5",onClick:o,children:"Cancelar"}),e.jsx("button",{onClick:l,className:"border py-1 w-36 rounded-xl bg-blue-500 hover:bg-blue-600 text-offwhite self-end justify-end mr-5 mt-5",children:"Delete"})]})]})}function Q({auth:o,users:l,roles:i}){const[d,c]=r.useState(l),[m,n]=r.useState(""),[t,w]=r.useState(!1),[k,j]=r.useState(!1),[y,b]=r.useState(!1),[S,N]=r.useState(!1),[h,f]=r.useState({}),[U,x]=r.useState(!1),{data:L,setData:p,post:v,reset:A}=q({name:"",email:"",telefono:"",rol_id:0,status:0}),C=s=>{let a=s.target.value;p("rol_id",s.target.value),a==2?w(!0):w(!1)},F=s=>{const a=l.filter(u=>u.id===s);j(!0),f(a[0]),p("rol_id",a[0].rol_id)},R=s=>{const a=l.filter(u=>u.id===s);b(!0),f(a[0])};function _(s){s=s.toLowerCase(),n(s);const a=l.filter(u=>u.name.toLowerCase().includes(s));c(a)}const M=s=>{N(!1),x(!0),v(route("register"),{onSuccess:()=>{x(!1)}})},E=()=>{N(!0)},D=s=>{s.preventDefault(),j(!1),x(!0),v(route("usuario.update",h.id),{onSuccess:()=>{x(!1),f({})}})},V=s=>{s.preventDefault(),b(!1),x(!0),v(route("usuario.delete",h.id),{onSuccess:()=>{x(!1),f({}),c(l)}})};return r.useEffect(()=>{c(l)},[l]),r.useEffect(()=>()=>{A("password","password_confirmation")},[]),e.jsxs(z,{countNotificaciones:o.countNotificaciones,user:o.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Usuarios"}),children:[e.jsx(B,{title:"Usuarios"}),e.jsx(g,{show:S,children:e.jsx(I,{roles:i,setData:p,isCliente:t,data:L,submit:M,changeRol:C,hideModal:()=>N(!1)})}),e.jsx(g,{show:k,children:e.jsx(W,{roles:i,changeRol:C,hideModal:()=>j(!1),update:D,setData:p,selectedUser:h})}),e.jsx(g,{show:y,children:e.jsx(G,{deleteUser:y,hideModal:()=>b(!1),destroy:V,selectedUser:h})}),e.jsx(g,{show:U,children:e.jsx(H,{})}),e.jsx("div",{className:"container mx-auto px-4 sm:px-8",children:e.jsxs("div",{className:"py-8",children:[e.jsxs("div",{className:"my-2 flex sm:flex-row flex-col gap-4 items-center",children:[e.jsxs("div",{className:"block relative",children:[e.jsx("span",{className:"h-full absolute inset-y-0 left-0 flex items-center pl-2",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4 fill-current text-gray-500",children:e.jsx("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"})})}),e.jsx("input",{placeholder:"Buscar usuario",className:"appearance-none rounded-r rounded-l sm:rounded-l-none border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none",value:m,onChange:s=>_(s.target.value)})]}),e.jsx("div",{children:e.jsx("button",{className:"bg-blue-600 rounded-sm h-9 px-2 hover:bg-blue-700 hover:shadow-md  text-gray-950 hover:text-gray-100",onClick:E,children:"Nuevo usuario"})})]}),e.jsx("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full shadow rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full leading-normal overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:d&&d.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-5 py-3 border-b border-gray-200 bg-white text-base font-medium",children:s.name}),e.jsx("td",{className:"px-5 py-3 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:s.rol.nombre})}),e.jsx("td",{className:"px-5 py-3 border-b border-gray-200 bg-white text-sm",children:s.status==0?e.jsx("span",{className:"bg-red-300 px-2 rounded-lg",children:"Inactivo"}):e.jsx("span",{className:"bg-blue-300 px-2 rounded-lg",children:"Activo"})}),e.jsx("td",{className:"px-5 py-3 border-b border-gray-200 bg-white text-sm",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"cursor-pointer",onClick:()=>{F(s.id)},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 hover:stroke-blue-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),e.jsx("span",{className:"cursor-pointer",onClick:()=>{R(s.id)},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 hover:stroke-red-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})})]},a))})]})})})]})})]})}export{Q as default};
